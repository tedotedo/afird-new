(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{8536:function(e,t,a){Promise.resolve().then(a.bind(a,3600))},3600:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var n=a(7437),s=a(893),l=a(2265);function i(e){let{format:t="json",onExport:a}=e,[s,i]=(0,l.useState)(!1),r=async()=>{i(!0);try{let e;let n=await fetch("/api/user/export-data?format=".concat(t));if(!n.ok)throw Error("Failed to export data");if("json"===t){let t=await n.json();e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"})}else e=await n.blob();let s=window.URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download="food-entries-".concat(new Date().toISOString().split("T")[0],".").concat(t),document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(s),document.body.removeChild(l),a&&a()}catch(e){alert("Failed to export data: ".concat(e.message))}finally{i(!1)}};return(0,n.jsx)("button",{onClick:r,disabled:s,className:"px-6 py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white font-semibold rounded-lg transition shadow-lg disabled:cursor-not-allowed",children:s?"Exporting...":"Download as ".concat(t.toUpperCase())})}var r=a(5632);function o(){let{user:e}=(0,r.a)();return(0,n.jsx)(s.default,{children:(0,n.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Settings"}),(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Account Information"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),(0,n.jsx)("p",{className:"text-gray-800",children:null==e?void 0:e.email})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"User ID"}),(0,n.jsx)("p",{className:"text-gray-800 text-xs font-mono",children:null==e?void 0:e.id})]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Data Export"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:"Download all your food entries and nutritional data. You can choose between JSON (structured data) or CSV (spreadsheet-friendly) format."}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)(i,{format:"json"}),(0,n.jsx)(i,{format:"csv"})]})]}),(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Data Privacy"}),(0,n.jsx)("p",{className:"text-sm text-blue-700",children:"Your data is stored securely and is only accessible to you. You can download your data at any time, and you have full control over your food entries. All data is encrypted and protected by Row Level Security policies."})]})]})})})}},893:function(e,t,a){"use strict";a.d(t,{default:function(){return r}});var n=a(7437),s=a(2265),l=a(9376),i=a(5632);function r(e){let{children:t,redirectTo:a="/login"}=e,{user:r,loading:o}=(0,i.a)(),d=(0,l.useRouter)();return((0,s.useEffect)(()=>{o||r||d.push(a)},[r,o,d,a]),o)?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):r?(0,n.jsx)(n.Fragment,{children:t}):null}},5632:function(e,t,a){"use strict";a.d(t,{a:function(){return i}});var n=a(2265),s=a(4033),l=a(9376);function i(){let[e,t]=(0,n.useState)(null),[a,i]=(0,n.useState)(null),[r,o]=(0,n.useState)(!0),d=(0,l.useRouter)(),c=(0,s.createBrowserClient)("https://migwxtovyxygobpmhuqk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pZ3d4dG92eXh5Z29icG1odXFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5MzM2MDgsImV4cCI6MjA4MTUwOTYwOH0.05AiLm3KJCGQnMsLv1ffezeISbzCOeXVrmRUtlC4ysg");return(0,n.useEffect)(()=>{c.auth.getSession().then(e=>{var a;let{data:{session:n}}=e;i(n),t(null!==(a=null==n?void 0:n.user)&&void 0!==a?a:null),o(!1)});let{data:{subscription:e}}=c.auth.onAuthStateChange((e,a)=>{var n;i(a),t(null!==(n=null==a?void 0:a.user)&&void 0!==n?n:null),o(!1)});return()=>e.unsubscribe()},[c]),{user:e,session:a,loading:r,signUp:async(e,t)=>{let{data:a,error:n}=await c.auth.signUp({email:e,password:t});if(n)throw n;return a},signIn:async(e,t)=>{let{data:a,error:n}=await c.auth.signInWithPassword({email:e,password:t});if(n)throw n;return a},signOut:async()=>{let{error:e}=await c.auth.signOut();if(e)throw e;d.push("/login")},isAuthenticated:!!e}}}},function(e){e.O(0,[146,971,117,744],function(){return e(e.s=8536)}),_N_E=e.O()}]);
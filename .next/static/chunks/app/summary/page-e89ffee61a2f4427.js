(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[129],{8001:function(e,t,s){Promise.resolve().then(s.bind(s,7071))},7071:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(7437),i=s(2265),l=s(893),n=s(4036);function r(e){let{totals:t,totalEntries:s,date:i}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Daily Summary"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:new Date(i).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,a.jsxs)("p",{className:"text-gray-600 mb-4",children:[s," ",1===s?"entry":"entries"," for this day"]})]}),(0,a.jsx)(n.Z,{nutritionalData:t})]})}var c=s(7041);function o(){let[e,t]=(0,i.useState)(()=>new Date().toISOString().split("T")[0]),[s,n]=(0,i.useState)(null),[o,d]=(0,i.useState)(!0),[m,u]=(0,i.useState)(null),x=async e=>{try{d(!0),u(null);let t=await fetch("/api/daily-summary?date=".concat(e));if(!t.ok)throw Error("Failed to fetch summary");let s=await t.json();n(s)}catch(e){u(e.message||"Failed to fetch daily summary")}finally{d(!1)}};return(0,i.useEffect)(()=>{x(e)},[e]),(0,a.jsx)(l.default,{children:(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Daily Summary"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("button",{onClick:()=>{let s=new Date(e);s.setDate(s.getDate()-1),t(s.toISOString().split("T")[0])},className:"px-4 py-2 bg-white rounded-lg shadow hover:bg-gray-50 transition",children:"← Previous"}),(0,a.jsx)("input",{type:"date",value:e,onChange:e=>{t(e.target.value)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)("button",{onClick:()=>{let s=new Date(e);s.setDate(s.getDate()+1),t(s.toISOString().split("T")[0])},className:"px-4 py-2 bg-white rounded-lg shadow hover:bg-gray-50 transition",children:"Next →"}),(0,a.jsx)("button",{onClick:()=>{t(new Date().toISOString().split("T")[0])},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition",children:"Today"})]})]}),o&&(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),m&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-4",children:m}),!o&&!m&&s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r,{totals:s.totals,totalEntries:s.totalEntries,date:s.date}),s.entries&&s.entries.length>0&&(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Entries for this day"}),(0,a.jsx)(c.Z,{entries:s.entries})]})]}),!o&&!m&&s&&0===s.totalEntries&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-8 text-center shadow",children:[(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:"No entries for this date"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Try selecting a different date or add some food entries!"})]})]})})})}},893:function(e,t,s){"use strict";s.d(t,{default:function(){return r}});var a=s(7437),i=s(2265),l=s(9376),n=s(5632);function r(e){let{children:t,redirectTo:s="/login"}=e,{user:r,loading:c}=(0,n.a)(),o=(0,l.useRouter)();return((0,i.useEffect)(()=>{c||r||o.push(s)},[r,c,o,s]),c)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):r?(0,a.jsx)(a.Fragment,{children:t}):null}},7041:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7437);s(2265);var i=s(8057);function l(e){let{entries:t,onDelete:s,showDelete:l=!1}=e;return 0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:"No food entries yet"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Start by taking a photo of your food!"})]}):(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-32 h-32 flex-shrink-0 relative",children:(0,a.jsx)("img",{src:e.image_url,alt:"Food",className:"w-full h-full object-cover"})}),(0,a.jsx)("div",{className:"flex-1 p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[e.meal_type&&(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded capitalize",children:e.meal_type}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:(0,i.o0)(new Date(e.date_time))})]}),e.nutritional_data.food_items&&e.nutritional_data.food_items.length>0&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.nutritional_data.food_items.join(", ")}),(0,a.jsxs)("div",{className:"flex gap-4 text-sm",children:[void 0!==e.nutritional_data.calories&&(0,a.jsxs)("span",{className:"text-gray-700",children:[(0,a.jsx)("span",{className:"font-semibold",children:e.nutritional_data.calories.toFixed(0)})," kcal"]}),void 0!==e.nutritional_data.protein&&(0,a.jsxs)("span",{className:"text-gray-700",children:[(0,a.jsxs)("span",{className:"font-semibold",children:[e.nutritional_data.protein.toFixed(1),"g"]})," protein"]}),void 0!==e.nutritional_data.carbohydrates&&(0,a.jsxs)("span",{className:"text-gray-700",children:[(0,a.jsxs)("span",{className:"font-semibold",children:[e.nutritional_data.carbohydrates.toFixed(1),"g"]})," carbs"]})]})]}),l&&s&&(0,a.jsx)("button",{onClick:()=>s(e.id),className:"ml-4 px-3 py-1 text-sm text-red-600 hover:bg-red-50 rounded transition",children:"Delete"})]})})]})},e.id))})}},4036:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7437);function i(e){let{title:t,value:s,unit:i,color:l="#3498db"}=e;return null==s?null:(0,a.jsxs)("div",{className:"flex items-center py-3 border-b border-gray-200 last:border-0",children:[(0,a.jsx)("div",{className:"w-1 h-10 rounded mr-4",style:{backgroundColor:l}}),(0,a.jsxs)("div",{className:"flex-1 flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-base text-gray-800",children:t}),(0,a.jsxs)("span",{className:"text-base font-semibold text-gray-800",children:[s.toFixed(s<1?2:0)," ",i]})]})]})}function l(e){let{nutritionalData:t}=e,s="#3498db",l="#9b59b6";return(0,a.jsxs)("div",{className:"w-full space-y-5",children:[void 0!==t.calories&&(0,a.jsx)("div",{className:"bg-white rounded-xl p-5 shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("div",{className:"w-1 h-12 rounded mr-4",style:{backgroundColor:"#e74c3c"}}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-base text-gray-600 mb-1",children:"Calories"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-800",children:[t.calories.toFixed(0)," kcal"]})]})]})}),(0,a.jsxs)("div",{className:"space-y-0",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-3 px-1",children:"Macronutrients"}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-lg",children:[(0,a.jsx)(i,{title:"Protein",value:t.protein,unit:"g",color:s}),(0,a.jsx)(i,{title:"Carbohydrates",value:t.carbohydrates,unit:"g",color:s}),(0,a.jsx)(i,{title:"Fat",value:t.fat,unit:"g",color:s})]})]}),(0,a.jsxs)("div",{className:"space-y-0",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-3 px-1",children:"Other Nutrients"}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-lg",children:[(0,a.jsx)(i,{title:"Fiber",value:t.fiber,unit:"g",color:l}),(0,a.jsx)(i,{title:"Sugar",value:t.sugar,unit:"g",color:l}),(0,a.jsx)(i,{title:"Sodium",value:t.sodium,unit:"mg",color:l})]})]}),t.vitamins&&Object.values(t.vitamins).some(e=>null!=e)&&(0,a.jsxs)("div",{className:"space-y-0",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-3 px-1",children:"Vitamins"}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-lg",children:[(0,a.jsx)(i,{title:"Vitamin A",value:t.vitamins.vitaminA,unit:"mcg RAE",color:"#f39c12"}),(0,a.jsx)(i,{title:"Vitamin B1 (Thiamine)",value:t.vitamins.vitaminB1,unit:"mg",color:"#f39c12"}),(0,a.jsx)(i,{title:"Vitamin B2 (Riboflavin)",value:t.vitamins.vitaminB2,unit:"mg",color:"#f39c12"}),(0,a.jsx)(i,{title:"Vitamin B3 (Niacin)",value:t.vitamins.vitaminB3,unit:"mg",color:"#f39c12"}),(0,a.jsx)(i,{title:"Vitamin B6",value:t.vitamins.vitaminB6,unit:"mg",color:"#f39c12"}),(0,a.jsx)(i,{title:"Vitamin B12",value:t.vitamins.vitaminB12,unit:"mcg",color:"#f39c12"}),(0,a.jsx)(i,{title:"Vitamin C",value:t.vitamins.vitaminC,unit:"mg",color:"#f39c12"}),(0,a.jsx)(i,{title:"Vitamin D",value:t.vitamins.vitaminD,unit:"mcg",color:"#f39c12"}),(0,a.jsx)(i,{title:"Vitamin E",value:t.vitamins.vitaminE,unit:"mg",color:"#f39c12"}),(0,a.jsx)(i,{title:"Vitamin K",value:t.vitamins.vitaminK,unit:"mcg",color:"#f39c12"}),(0,a.jsx)(i,{title:"Folate",value:t.vitamins.folate,unit:"mcg",color:"#f39c12"})]})]}),t.minerals&&Object.values(t.minerals).some(e=>null!=e)&&(0,a.jsxs)("div",{className:"space-y-0",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-3 px-1",children:"Minerals"}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-lg",children:[(0,a.jsx)(i,{title:"Calcium",value:t.minerals.calcium,unit:"mg",color:"#16a085"}),(0,a.jsx)(i,{title:"Iron",value:t.minerals.iron,unit:"mg",color:"#16a085"}),(0,a.jsx)(i,{title:"Magnesium",value:t.minerals.magnesium,unit:"mg",color:"#16a085"}),(0,a.jsx)(i,{title:"Phosphorus",value:t.minerals.phosphorus,unit:"mg",color:"#16a085"}),(0,a.jsx)(i,{title:"Potassium",value:t.minerals.potassium,unit:"mg",color:"#16a085"}),(0,a.jsx)(i,{title:"Zinc",value:t.minerals.zinc,unit:"mg",color:"#16a085"}),(0,a.jsx)(i,{title:"Copper",value:t.minerals.copper,unit:"mg",color:"#16a085"}),(0,a.jsx)(i,{title:"Manganese",value:t.minerals.manganese,unit:"mg",color:"#16a085"}),(0,a.jsx)(i,{title:"Selenium",value:t.minerals.selenium,unit:"mcg",color:"#16a085"})]})]}),t.meal_type&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow flex items-center",children:[(0,a.jsx)("span",{className:"text-base text-gray-600 mr-2",children:"Meal Type:"}),(0,a.jsx)("span",{className:"text-base font-semibold text-gray-800 capitalize",children:t.meal_type})]}),t.food_items&&t.food_items.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow",children:[(0,a.jsx)("p",{className:"text-base font-semibold text-gray-800 mb-3",children:"Food Items:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.food_items.map((e,t)=>(0,a.jsx)("span",{className:"bg-gray-100 px-3 py-1.5 rounded-full text-sm text-gray-800",children:e},t))})]}),t.description&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow",children:[(0,a.jsx)("p",{className:"text-base font-semibold text-gray-800 mb-2",children:"Description:"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:t.description})]})]})}s(2265)},5632:function(e,t,s){"use strict";s.d(t,{a:function(){return n}});var a=s(2265),i=s(4033),l=s(9376);function n(){let[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(null),[r,c]=(0,a.useState)(!0),o=(0,l.useRouter)(),d=(0,i.createBrowserClient)("https://migwxtovyxygobpmhuqk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pZ3d4dG92eXh5Z29icG1odXFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5MzM2MDgsImV4cCI6MjA4MTUwOTYwOH0.05AiLm3KJCGQnMsLv1ffezeISbzCOeXVrmRUtlC4ysg");return(0,a.useEffect)(()=>{d.auth.getSession().then(e=>{var s;let{data:{session:a}}=e;n(a),t(null!==(s=null==a?void 0:a.user)&&void 0!==s?s:null),c(!1)});let{data:{subscription:e}}=d.auth.onAuthStateChange((e,s)=>{var a;n(s),t(null!==(a=null==s?void 0:s.user)&&void 0!==a?a:null),c(!1)});return()=>e.unsubscribe()},[d]),{user:e,session:s,loading:r,signUp:async(e,t)=>{let{data:s,error:a}=await d.auth.signUp({email:e,password:t});if(a)throw a;return s},signIn:async(e,t)=>{let{data:s,error:a}=await d.auth.signInWithPassword({email:e,password:t});if(a)throw a;return s},signOut:async()=>{let{error:e}=await d.auth.signOut();if(e)throw e;o.push("/login")},isAuthenticated:!!e}}},8057:function(e,t,s){"use strict";s.d(t,{SY:function(){return n},o0:function(){return l}});var a=s(7868),i=s(4081);function l(e){return(0,a.Z)(e,"PPp")}function n(e){return(0,i.Z)(e,{addSuffix:!0})}}},function(e){e.O(0,[146,797,971,117,744],function(){return e(e.s=8001)}),_N_E=e.O()}]);
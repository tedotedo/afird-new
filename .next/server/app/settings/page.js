(()=>{var e={};e.id=938,e.ids=[938],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4469:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(5964),s(564),s(5866);var r=s(3191),a=s(8716),n=s(7922),i=s.n(n),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5964)),"/Users/odet/websites/AFIRD-new/src/app/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,564)),"/Users/odet/websites/AFIRD-new/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/odet/websites/AFIRD-new/src/app/settings/page.tsx"],u="/settings/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5759:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},6811:(e,t,s)=>{Promise.resolve().then(s.bind(s,4780))},712:(e,t,s)=>{Promise.resolve().then(s.bind(s,2217))},2217:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(326),a=s(8759),n=s(7577);function i({format:e="json",onExport:t}){let[s,a]=(0,n.useState)(!1),i=async()=>{a(!0);try{let s;let r=await fetch(`/api/user/export-data?format=${e}`);if(!r.ok)throw Error("Failed to export data");if("json"===e){let e=await r.json();s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"})}else s=await r.blob();let a=window.URL.createObjectURL(s),n=document.createElement("a");n.href=a,n.download=`food-entries-${new Date().toISOString().split("T")[0]}.${e}`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(a),document.body.removeChild(n),t&&t()}catch(e){alert(`Failed to export data: ${e.message}`)}finally{a(!1)}};return r.jsx("button",{onClick:i,disabled:s,className:"px-6 py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white font-semibold rounded-lg transition shadow-lg disabled:cursor-not-allowed",children:s?"Exporting...":`Download as ${e.toUpperCase()}`})}var l=s(93);function o(){let{user:e}=(0,l.a)();return r.jsx(a.default,{children:r.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Settings"}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Account Information"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),r.jsx("p",{className:"text-gray-800",children:e?.email})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:"User ID"}),r.jsx("p",{className:"text-gray-800 text-xs font-mono",children:e?.id})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Data Export"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Download all your food entries and nutritional data. You can choose between JSON (structured data) or CSV (spreadsheet-friendly) format."}),(0,r.jsxs)("div",{className:"flex gap-4",children:[r.jsx(i,{format:"json"}),r.jsx(i,{format:"csv"})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Data Privacy"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Your data is stored securely and is only accessible to you. You can download your data at any time, and you have full control over your food entries. All data is encrypted and protected by Row Level Security policies."})]})]})})})}},8759:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(326);s(7577);var a=s(5047),n=s(93);function i({children:e,redirectTo:t="/login"}){let{user:s,loading:i}=(0,n.a)();return((0,a.useRouter)(),i)?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):s?r.jsx(r.Fragment,{children:e}):null}},4780:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var r=s(326),a=s(434),n=s(5047),i=s(93);function l(){let{user:e,signOut:t}=(0,i.a)(),s=(0,n.usePathname)();(0,n.useRouter)();let l=async()=>{try{await t()}catch(e){console.error("Logout error:",e)}};return"/login"===s?null:r.jsx("nav",{className:"bg-white shadow-md border-b border-gray-200",children:r.jsx("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-8",children:[r.jsx(a.default,{href:"/",className:"text-xl font-bold text-blue-600",children:"Food Tracker"}),r.jsx("div",{className:"hidden md:flex space-x-4",children:[{href:"/",label:"Camera"},{href:"/history",label:"History"},{href:"/summary",label:"Summary"},{href:"/settings",label:"Settings"},{href:"/admin",label:"Admin"}].map(e=>r.jsx(a.default,{href:e.href,className:`px-3 py-2 rounded-md text-sm font-medium transition ${s===e.href?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:e.label},e.href))})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[e&&r.jsx("span",{className:"text-sm text-gray-600 hidden sm:block",children:e.email}),r.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md transition",children:"Logout"})]})]})})})}},93:(e,t,s)=>{"use strict";s.d(t,{a:()=>i});var r=s(7577),a=s(861),n=s(5047);function i(){let[e,t]=(0,r.useState)(null),[s,i]=(0,r.useState)(null),[l,o]=(0,r.useState)(!0),d=(0,n.useRouter)(),c=(0,a.createBrowserClient)("https://migwxtovyxygobpmhuqk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pZ3d4dG92eXh5Z29icG1odXFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5MzM2MDgsImV4cCI6MjA4MTUwOTYwOH0.05AiLm3KJCGQnMsLv1ffezeISbzCOeXVrmRUtlC4ysg");return{user:e,session:s,loading:l,signUp:async(e,t)=>{let{data:s,error:r}=await c.auth.signUp({email:e,password:t});if(r)throw r;return s},signIn:async(e,t)=>{let{data:s,error:r}=await c.auth.signInWithPassword({email:e,password:t});if(r)throw r;return s},signOut:async()=>{let{error:e}=await c.auth.signOut();if(e)throw e;d.push("/login")},isAuthenticated:!!e}}},564:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>n});var r=s(9510);s(5023);let a=(0,s(8570).createProxy)(String.raw`/Users/odet/websites/AFIRD-new/src/components/Navigation.tsx#default`),n={title:"Food Nutrition Analyzer",description:"Analyze food photos for nutritional information using AI"};function i({children:e}){return r.jsx("html",{lang:"en",children:(0,r.jsxs)("body",{children:[r.jsx(a,{}),e]})})}},5964:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/odet/websites/AFIRD-new/src/app/settings/page.tsx#default`)},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,598],()=>s(4469));module.exports=r})();